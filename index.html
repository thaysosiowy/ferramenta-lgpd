<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ferramenta de Avaliação de Conformidade LGPD - OSIOWY Premium</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .header .icon {
            font-size: 3rem;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .progress-bar {
            background: rgba(255, 255, 255, 0.2);
            height: 8px;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: #4CAF50;
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .step-indicator {
            text-align: center;
            color: white;
            margin-bottom: 20px;
            font-size: 1.1rem;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            color: #333;
        }

        .card h2 {
            color: #333;
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }

        .card p {
            color: #666;
            text-align: center;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .step {
            display: none;
        }

        .step.active {
            display: block;
        }

        .step h2 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.8rem;
        }

        .step p {
            color: #666;
            margin-bottom: 30px;
            font-style: italic;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .question {
            margin-bottom: 30px;
            padding: 20px;
            border-left: 4px solid #667eea;
            background: #f8f9fa;
            border-radius: 0 8px 8px 0;
        }

        .question h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .option:hover {
            border-color: #667eea;
            background: #f0f4ff;
        }

        .option input[type="radio"] {
            margin-right: 12px;
            width: auto;
        }

        .option.selected {
            border-color: #4CAF50;
            background: #e8f5e8;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .intro-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .feature {
            text-align: center;
            color: #333;
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 10px;
            backdrop-filter: blur(10px);
        }

        .feature-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            color: #4CAF50;
        }

        .feature h3 {
            margin-bottom: 10px;
            font-size: 1.3rem;
            color: #333;
        }

        .feature p {
            color: #666;
            line-height: 1.5;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin: 40px 0;
            text-align: center;
        }

        .stat {
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 10px;
            backdrop-filter: blur(10px);
            color: #333;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #4CAF50;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
        }

        .results {
            text-align: center;
        }

        .score {
            font-size: 4rem;
            font-weight: bold;
            color: #4CAF50;
            margin: 20px 0;
        }

        .classification {
            font-size: 1.5rem;
            margin-bottom: 30px;
            padding: 15px 30px;
            border-radius: 25px;
            display: inline-block;
        }

        .excellent {
            background: #d4edda;
            color: #155724;
        }

        .good {
            background: #d1ecf1;
            color: #0c5460;
        }

        .partial {
            background: #fff3cd;
            color: #856404;
        }

        .critical {
            background: #f8d7da;
            color: #721c24;
        }

        .recommendations {
            text-align: left;
            margin-top: 30px;
        }

        .recommendation {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #667eea;
        }

        .recommendation h4 {
            color: #333;
            margin-bottom: 10px;
        }

        .recommendation p {
            color: #666;
            line-height: 1.6;
        }

        .priority {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .priority.high {
            background: #f8d7da;
            color: #721c24;
        }

        .priority.medium {
            background: #fff3cd;
            color: #856404;
        }

        .priority.low {
            background: #d4edda;
            color: #155724;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .header h1 {
                font-size: 2rem;
            }

            .card {
                padding: 20px;
            }

            .stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .intro-features {
                grid-template-columns: 1fr;
            }
        }

        .error {
            color: #dc3545;
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><span class="icon"></span> Avaliação de Conformidade LGPD</h1>
            <p>Diagnóstico especializado baseado em metodologia científica e conformidade legal brasileira</p>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <div class="step-indicator" id="stepIndicator">Introdução</div>

        <!-- Etapa 0: Introdução -->
        <div class="step active" id="step0">
            <div class="card">
                <h2>Diagnóstico Especializado em LGPD</h2>
                <p>Esta ferramenta foi desenvolvida com base na metodologia científica de conformidade LGPD, incorporando as melhores práticas internacionais de Privacy by Design e as diretrizes da ANPD.</p>
                
                <div class="intro-features">
                    <div class="feature">
                        <div class="feature-icon"></div>
                        <h3>Conformidade Legal</h3>
                        <p>Baseado integralmente na Lei 13.709/2018 e regulamentações da ANPD</p>
                    </div>
                    <div class="feature">
                        <div class="feature-icon"></div>
                        <h3>Metodologia Científica</h3>
                        <p>Framework validado por especialistas em proteção de dados</p>
                    </div>
                    <div class="feature">
                        <div class="feature-icon"></div>
                        <h3>Recomendações Específicas</h3>
                        <p>Orientações personalizadas por setor, porte e nível de maturidade</p>
                    </div>
                </div>

                <div class="stats">
                    <div class="stat">
                        <div class="stat-number">⏱ 15-20</div>
                        <div class="stat-label">minutos<br>Tempo</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number"> 45</div>
                        <div class="stat-label">questões<br>Perguntas especializadas</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number"> Diagnóstico</div>
                        <div class="stat-label">Resultado detalhado</div>
                    </div>
                    <div class="stat">
                        <div class="stat-number"> Plano</div>
                        <div class="stat-label">Adequação estruturado</div>
                    </div>
                </div>

                <div class="navigation">
                    <div></div>
                    <button class="btn btn-primary" onclick="nextStep()">Iniciar Avaliação </button>
                </div>
            </div>
        </div>

        <!-- Etapa 1: Informações da Empresa -->
        <div class="step" id="step1">
            <div class="card">
                <h2>Informações da Empresa</h2>
                <p>Forneça informações básicas para personalizar as recomendações conforme seu perfil empresarial.</p>
                
                <div class="form-group">
                    <label for="companyName">Nome da Empresa *</label>
                    <input type="text" id="companyName" placeholder="Digite o nome da sua empresa" required>
                    <div class="error" id="companyNameError"></div>
                </div>

                <div class="form-group">
                    <label for="sector">Setor de Atuação *</label>
                    <select id="sector" required>
                        <option value="">Selecione uma opção</option>
                        <option value="tecnologia">Tecnologia</option>
                        <option value="saude">Saúde</option>
                        <option value="financeiro">Financeiro</option>
                        <option value="educacao">Educação</option>
                        <option value="varejo">Varejo</option>
                        <option value="servicos">Serviços</option>
                        <option value="industria">Indústria</option>
                        <option value="governo">Governo/Público</option>
                        <option value="outro">Outro</option>
                    </select>
                    <div class="error" id="sectorError"></div>
                </div>

                <div class="form-group">
                    <label for="employees">Número de Funcionários *</label>
                    <select id="employees" required>
                        <option value="">Selecione uma opção</option>
                        <option value="1-10">1-10 funcionários</option>
                        <option value="11-50">11-50 funcionários</option>
                        <option value="51-200">51-200 funcionários</option>
                        <option value="201-500">201-500 funcionários</option>
                        <option value="500+">Mais de 500 funcionários</option>
                    </select>
                    <div class="error" id="employeesError"></div>
                </div>

                <div class="form-group">
                    <label for="email">E-mail para Contato *</label>
                    <input type="email" id="email" placeholder="seu@email.com" required>
                    <small style="color: #666; font-size: 0.9rem;">Para envio sobre atualizações do mundo LGPD</small>
                    <div class="error" id="emailError"></div>
                </div>

                <div class="navigation">
                    <button class="btn btn-secondary" onclick="previousStep()"> Anterior</button>
                    <button class="btn btn-primary" onclick="nextStep()">Próximo </button>
                </div>
            </div>
        </div>

        <!-- Etapas 2-10: Perguntas -->
        <div class="step" id="step2">
            <div class="card">
                <h2>Governança e Estrutura</h2>
                <p>Avaliação da estrutura de governança conforme Art. 50 da LGPD.</p>
                
                <div class="question">
                    <h3>1. A empresa possui um programa formal de governança em privacidade?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q1" value="4"> Programa completo e estruturado
                        </label>
                        <label class="option">
                            <input type="radio" name="q1" value="3"> Programa em desenvolvimento
                        </label>
                        <label class="option">
                            <input type="radio" name="q1" value="2"> Políticas básicas implementadas
                        </label>
                        <label class="option">
                            <input type="radio" name="q1" value="1"> Iniciativas pontuais
                        </label>
                        <label class="option">
                            <input type="radio" name="q1" value="0"> Não possui programa
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>2. Há um encarregado (DPO) designado para proteção de dados?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q2" value="4"> DPO qualificado e atuante
                        </label>
                        <label class="option">
                            <input type="radio" name="q2" value="3"> DPO designado em treinamento
                        </label>
                        <label class="option">
                            <input type="radio" name="q2" value="2"> Responsável interno designado
                        </label>
                        <label class="option">
                            <input type="radio" name="q2" value="1"> Em processo de designação
                        </label>
                        <label class="option">
                            <input type="radio" name="q2" value="0"> Não possui DPO
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>3. A empresa possui políticas internas de proteção de dados?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q3" value="4"> Políticas completas e atualizadas
                        </label>
                        <label class="option">
                            <input type="radio" name="q3" value="3"> Políticas adequadas
                        </label>
                        <label class="option">
                            <input type="radio" name="q3" value="2"> Políticas básicas
                        </label>
                        <label class="option">
                            <input type="radio" name="q3" value="1"> Políticas em desenvolvimento
                        </label>
                        <label class="option">
                            <input type="radio" name="q3" value="0"> Não possui políticas
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>4. Há treinamentos regulares sobre LGPD para funcionários?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q4" value="4"> Programa estruturado e regular
                        </label>
                        <label class="option">
                            <input type="radio" name="q4" value="3"> Treinamentos periódicos
                        </label>
                        <label class="option">
                            <input type="radio" name="q4" value="2"> Treinamentos básicos
                        </label>
                        <label class="option">
                            <input type="radio" name="q4" value="1"> Treinamentos esporádicos
                        </label>
                        <label class="option">
                            <input type="radio" name="q4" value="0"> Não há treinamentos
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>5. A empresa realiza auditorias internas de conformidade?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q5" value="4"> Auditorias regulares e estruturadas
                        </label>
                        <label class="option">
                            <input type="radio" name="q5" value="3"> Auditorias periódicas
                        </label>
                        <label class="option">
                            <input type="radio" name="q5" value="2"> Verificações básicas
                        </label>
                        <label class="option">
                            <input type="radio" name="q5" value="1"> Verificações esporádicas
                        </label>
                        <label class="option">
                            <input type="radio" name="q5" value="0"> Não realiza auditorias
                        </label>
                    </div>
                </div>

                <div class="navigation">
                    <button class="btn btn-secondary" onclick="previousStep()"> Anterior</button>
                    <button class="btn btn-primary" onclick="nextStep()">Próximo </button>
                </div>
            </div>
        </div>

        <!-- Etapa 3: Mapeamento e Inventário -->
        <div class="step" id="step3">
            <div class="card">
                <h2>Mapeamento e Inventário</h2>
                <p>Avaliação do mapeamento de dados conforme Art. 37 da LGPD.</p>
                
                <div class="question">
                    <h3>6. A empresa possui inventário completo dos dados pessoais tratados?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q6" value="4"> Inventário completo e atualizado
                        </label>
                        <label class="option">
                            <input type="radio" name="q6" value="3"> Inventário adequado
                        </label>
                        <label class="option">
                            <input type="radio" name="q6" value="2"> Inventário básico
                        </label>
                        <label class="option">
                            <input type="radio" name="q6" value="1"> Inventário parcial
                        </label>
                        <label class="option">
                            <input type="radio" name="q6" value="0"> Não possui inventário
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>7. Há mapeamento dos fluxos de dados na organização?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q7" value="4"> Mapeamento completo e documentado
                        </label>
                        <label class="option">
                            <input type="radio" name="q7" value="3"> Mapeamento adequado
                        </label>
                        <label class="option">
                            <input type="radio" name="q7" value="2"> Mapeamento básico
                        </label>
                        <label class="option">
                            <input type="radio" name="q7" value="1"> Mapeamento parcial
                        </label>
                        <label class="option">
                            <input type="radio" name="q7" value="0"> Não há mapeamento
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>8. A empresa identifica e classifica dados sensíveis?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q8" value="4"> Classificação completa e estruturada
                        </label>
                        <label class="option">
                            <input type="radio" name="q8" value="3"> Classificação adequada
                        </label>
                        <label class="option">
                            <input type="radio" name="q8" value="2"> Classificação básica
                        </label>
                        <label class="option">
                            <input type="radio" name="q8" value="1"> Identificação parcial
                        </label>
                        <label class="option">
                            <input type="radio" name="q8" value="0"> Não identifica dados sensíveis
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>9. Há documentação das atividades de tratamento?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q9" value="4"> Documentação completa e atualizada
                        </label>
                        <label class="option">
                            <input type="radio" name="q9" value="3"> Documentação adequada
                        </label>
                        <label class="option">
                            <input type="radio" name="q9" value="2"> Documentação básica
                        </label>
                        <label class="option">
                            <input type="radio" name="q9" value="1"> Documentação parcial
                        </label>
                        <label class="option">
                            <input type="radio" name="q9" value="0"> Não há documentação
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>10. A empresa monitora o ciclo de vida dos dados?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q10" value="4"> Monitoramento completo e automatizado
                        </label>
                        <label class="option">
                            <input type="radio" name="q10" value="3"> Monitoramento estruturado
                        </label>
                        <label class="option">
                            <input type="radio" name="q10" value="2"> Controle básico
                        </label>
                        <label class="option">
                            <input type="radio" name="q10" value="1"> Controle parcial
                        </label>
                        <label class="option">
                            <input type="radio" name="q10" value="0"> Não monitora
                        </label>
                    </div>
                </div>

                <div class="navigation">
                    <button class="btn btn-secondary" onclick="previousStep()"> Anterior</button>
                    <button class="btn btn-primary" onclick="nextStep()">Próximo </button>
                </div>
            </div>
        </div>

        <!-- Etapa 4: Bases Legais e Finalidades -->
        <div class="step" id="step4">
            <div class="card">
                <h2>Bases Legais e Finalidades</h2>
                <p>Avaliação das bases legais conforme Art. 7º e 11º da LGPD.</p>
                
                <div class="question">
                    <h3>11. A empresa identifica bases legais para cada tratamento?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q11" value="4"> Identificação completa e documentada
                        </label>
                        <label class="option">
                            <input type="radio" name="q11" value="3"> Identificação adequada
                        </label>
                        <label class="option">
                            <input type="radio" name="q11" value="2"> Identificação básica
                        </label>
                        <label class="option">
                            <input type="radio" name="q11" value="1"> Identificação parcial
                        </label>
                        <label class="option">
                            <input type="radio" name="q11" value="0"> Não identifica bases legais
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>12. As finalidades do tratamento são específicas e explícitas?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q12" value="4"> Finalidades claras e específicas
                        </label>
                        <label class="option">
                            <input type="radio" name="q12" value="3"> Finalidades adequadamente definidas
                        </label>
                        <label class="option">
                            <input type="radio" name="q12" value="2"> Finalidades básicas definidas
                        </label>
                        <label class="option">
                            <input type="radio" name="q12" value="1"> Finalidades genéricas
                        </label>
                        <label class="option">
                            <input type="radio" name="q12" value="0"> Finalidades não definidas
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>13. A empresa obtém consentimento quando necessário?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q13" value="4"> Processo estruturado de consentimento
                        </label>
                        <label class="option">
                            <input type="radio" name="q13" value="3"> Consentimento adequado
                        </label>
                        <label class="option">
                            <input type="radio" name="q13" value="2"> Consentimento básico
                        </label>
                        <label class="option">
                            <input type="radio" name="q13" value="1"> Consentimento informal
                        </label>
                        <label class="option">
                            <input type="radio" name="q13" value="0"> Não obtém consentimento
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>14. Há controle sobre o uso de dados para finalidades secundárias?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q14" value="4"> Controle rigoroso e documentado
                        </label>
                        <label class="option">
                            <input type="radio" name="q14" value="3"> Controle adequado
                        </label>
                        <label class="option">
                            <input type="radio" name="q14" value="2"> Controle básico
                        </label>
                        <label class="option">
                            <input type="radio" name="q14" value="1"> Controle limitado
                        </label>
                        <label class="option">
                            <input type="radio" name="q14" value="0"> Não há controle
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>15. A empresa revisa regularmente as bases legais utilizadas?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q15" value="4"> Revisão regular e estruturada
                        </label>
                        <label class="option">
                            <input type="radio" name="q15" value="3"> Revisão periódica
                        </label>
                        <label class="option">
                            <input type="radio" name="q15" value="2"> Revisão básica
                        </label>
                        <label class="option">
                            <input type="radio" name="q15" value="1"> Revisão esporádica
                        </label>
                        <label class="option">
                            <input type="radio" name="q15" value="0"> Não revisa
                        </label>
                    </div>
                </div>

                <div class="navigation">
                    <button class="btn btn-secondary" onclick="previousStep()"> Anterior</button>
                    <button class="btn btn-primary" onclick="nextStep()">Próximo </button>
                </div>
            </div>
        </div>

        <!-- Etapa 5: Direitos dos Titulares -->
        <div class="step" id="step5">
            <div class="card">
                <h2>Direitos dos Titulares</h2>
                <p>Avaliação do atendimento aos direitos conforme Art. 18 da LGPD.</p>
                
                <div class="question">
                    <h3>16. A empresa possui canal para exercício de direitos dos titulares?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q16" value="4"> Canal dedicado e eficiente
                        </label>
                        <label class="option">
                            <input type="radio" name="q16" value="3"> Canal estruturado
                        </label>
                        <label class="option">
                            <input type="radio" name="q16" value="2"> Canal básico
                        </label>
                        <label class="option">
                            <input type="radio" name="q16" value="1"> Canal informal
                        </label>
                        <label class="option">
                            <input type="radio" name="q16" value="0"> Não possui canal
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>17. Há processo para atender solicitações de acesso aos dados?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q17" value="4"> Processo automatizado e eficiente
                        </label>
                        <label class="option">
                            <input type="radio" name="q17" value="3"> Processo estruturado
                        </label>
                        <label class="option">
                            <input type="radio" name="q17" value="2"> Processo básico
                        </label>
                        <label class="option">
                            <input type="radio" name="q17" value="1"> Processo manual
                        </label>
                        <label class="option">
                            <input type="radio" name="q17" value="0"> Não há processo
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>18. A empresa atende solicitações de correção de dados?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q18" value="4"> Processo ágil e estruturado
                        </label>
                        <label class="option">
                            <input type="radio" name="q18" value="3"> Processo adequado
                        </label>
                        <label class="option">
                            <input type="radio" name="q18" value="2"> Processo básico
                        </label>
                        <label class="option">
                            <input type="radio" name="q18" value="1"> Atendimento limitado
                        </label>
                        <label class="option">
                            <input type="radio" name="q18" value="0"> Não atende
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>19. Há processo para exclusão de dados (direito ao esquecimento)?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q19" value="4"> Processo completo e automatizado
                        </label>
                        <label class="option">
                            <input type="radio" name="q19" value="3"> Processo estruturado
                        </label>
                        <label class="option">
                            <input type="radio" name="q19" value="2"> Processo básico
                        </label>
                        <label class="option">
                            <input type="radio" name="q19" value="1"> Processo manual
                        </label>
                        <label class="option">
                            <input type="radio" name="q19" value="0"> Não há processo
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>20. A empresa atende solicitações de portabilidade de dados?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q20" value="4"> Processo automatizado e eficiente
                        </label>
                        <label class="option">
                            <input type="radio" name="q20" value="3"> Processo estruturado
                        </label>
                        <label class="option">
                            <input type="radio" name="q20" value="2"> Processo básico
                        </label>
                        <label class="option">
                            <input type="radio" name="q20" value="1"> Atendimento limitado
                        </label>
                        <label class="option">
                            <input type="radio" name="q20" value="0"> Não atende
                        </label>
                    </div>
                </div>

                <div class="navigation">
                    <button class="btn btn-secondary" onclick="previousStep()"> Anterior</button>
                    <button class="btn btn-primary" onclick="nextStep()">Próximo </button>
                </div>
            </div>
        </div>

        <!-- Etapa 6: Segurança da Informação -->
        <div class="step" id="step6">
            <div class="card">
                <h2>Segurança da Informação</h2>
                <p>Avaliação das medidas de segurança conforme Art. 46 da LGPD.</p>
                
                <div class="question">
                    <h3>21. A empresa implementa medidas técnicas de segurança adequadas?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q21" value="4"> Medidas avançadas e atualizadas
                        </label>
                        <label class="option">
                            <input type="radio" name="q21" value="3"> Medidas adequadas
                        </label>
                        <label class="option">
                            <input type="radio" name="q21" value="2"> Medidas básicas
                        </label>
                        <label class="option">
                            <input type="radio" name="q21" value="1"> Medidas limitadas
                        </label>
                        <label class="option">
                            <input type="radio" name="q21" value="0"> Medidas insuficientes
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>22. Há controles de acesso aos dados pessoais?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q22" value="4"> Controles rigorosos e granulares
                        </label>
                        <label class="option">
                            <input type="radio" name="q22" value="3"> Controles adequados
                        </label>
                        <label class="option">
                            <input type="radio" name="q22" value="2"> Controles básicos
                        </label>
                        <label class="option">
                            <input type="radio" name="q22" value="1"> Controles limitados
                        </label>
                        <label class="option">
                            <input type="radio" name="q22" value="0"> Sem controles
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>23. A empresa utiliza criptografia para proteção de dados?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q23" value="4"> Criptografia avançada e abrangente
                        </label>
                        <label class="option">
                            <input type="radio" name="q23" value="3"> Criptografia adequada
                        </label>
                        <label class="option">
                            <input type="radio" name="q23" value="2"> Criptografia básica
                        </label>
                        <label class="option">
                            <input type="radio" name="q23" value="1"> Criptografia limitada
                        </label>
                        <label class="option">
                            <input type="radio" name="q23" value="0"> Não utiliza criptografia
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>24. Há monitoramento de segurança e detecção de incidentes?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q24" value="4"> Monitoramento 24/7 automatizado
                        </label>
                        <label class="option">
                            <input type="radio" name="q24" value="3"> Monitoramento estruturado
                        </label>
                        <label class="option">
                            <input type="radio" name="q24" value="2"> Monitoramento básico
                        </label>
                        <label class="option">
                            <input type="radio" name="q24" value="1"> Monitoramento limitado
                        </label>
                        <label class="option">
                            <input type="radio" name="q24" value="0"> Não há monitoramento
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>25. A empresa realiza backups seguros dos dados?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q25" value="4"> Backup automatizado e criptografado
                        </label>
                        <label class="option">
                            <input type="radio" name="q25" value="3"> Backup estruturado
                        </label>
                        <label class="option">
                            <input type="radio" name="q25" value="2"> Backup básico
                        </label>
                        <label class="option">
                            <input type="radio" name="q25" value="1"> Backup esporádico
                        </label>
                        <label class="option">
                            <input type="radio" name="q25" value="0"> Não realiza backup
                        </label>
                    </div>
                </div>

                <div class="navigation">
                    <button class="btn btn-secondary" onclick="previousStep()"> Anterior</button>
                    <button class="btn btn-primary" onclick="nextStep()">Próximo </button>
                </div>
            </div>
        </div>

        <!-- Etapa 7: Gestão de Terceiros -->
        <div class="step" id="step7">
            <div class="card">
                <h2>Gestão de Terceiros</h2>
                <p>Avaliação da gestão de operadores conforme Art. 42 da LGPD.</p>
                
                <div class="question">
                    <h3>26. A empresa possui contratos adequados com operadores?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q26" value="4"> Contratos completos e específicos
                        </label>
                        <label class="option">
                            <input type="radio" name="q26" value="3"> Contratos adequados
                        </label>
                        <label class="option">
                            <input type="radio" name="q26" value="2"> Contratos básicos
                        </label>
                        <label class="option">
                            <input type="radio" name="q26" value="1"> Contratos genéricos
                        </label>
                        <label class="option">
                            <input type="radio" name="q26" value="0"> Não possui contratos específicos
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>27. Há due diligence de fornecedores em relação à LGPD?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q27" value="4"> Due diligence rigorosa e estruturada
                        </label>
                        <label class="option">
                            <input type="radio" name="q27" value="3"> Due diligence adequada
                        </label>
                        <label class="option">
                            <input type="radio" name="q27" value="2"> Verificação básica
                        </label>
                        <label class="option">
                            <input type="radio" name="q27" value="1"> Verificação limitada
                        </label>
                        <label class="option">
                            <input type="radio" name="q27" value="0"> Não realiza due diligence
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>28. A empresa monitora a conformidade de terceiros?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q28" value="4"> Monitoramento contínuo e estruturado
                        </label>
                        <label class="option">
                            <input type="radio" name="q28" value="3"> Monitoramento periódico
                        </label>
                        <label class="option">
                            <input type="radio" name="q28" value="2"> Verificação básica
                        </label>
                        <label class="option">
                            <input type="radio" name="q28" value="1"> Verificação esporádica
                        </label>
                        <label class="option">
                            <input type="radio" name="q28" value="0"> Não monitora
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>29. Há processo para gestão de suboperadores?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q29" value="4"> Processo completo e documentado
                        </label>
                        <label class="option">
                            <input type="radio" name="q29" value="3"> Processo estruturado
                        </label>
                        <label class="option">
                            <input type="radio" name="q29" value="2"> Controle básico
                        </label>
                        <label class="option">
                            <input type="radio" name="q29" value="1"> Controle limitado
                        </label>
                        <label class="option">
                            <input type="radio" name="q29" value="0"> Não há processo
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>30. A empresa avalia riscos de transferência internacional?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q30" value="4"> Avaliação rigorosa e documentada
                        </label>
                        <label class="option">
                            <input type="radio" name="q30" value="3"> Avaliação adequada
                        </label>
                        <label class="option">
                            <input type="radio" name="q30" value="2"> Avaliação básica
                        </label>
                        <label class="option">
                            <input type="radio" name="q30" value="1"> Avaliação limitada
                        </label>
                        <label class="option">
                            <input type="radio" name="q30" value="0"> Não avalia
                        </label>
                    </div>
                </div>

                <div class="navigation">
                    <button class="btn btn-secondary" onclick="previousStep()"> Anterior</button>
                    <button class="btn btn-primary" onclick="nextStep()">Próximo </button>
                </div>
            </div>
        </div>

        <!-- Etapa 8: Gestão de Incidentes -->
        <div class="step" id="step8">
            <div class="card">
                <h2>Gestão de Incidentes</h2>
                <p>Avaliação da gestão de incidentes conforme Art. 48 da LGPD.</p>
                
                <div class="question">
                    <h3>31. A empresa possui plano de resposta a incidentes?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q31" value="4"> Plano completo e testado
                        </label>
                        <label class="option">
                            <input type="radio" name="q31" value="3"> Plano estruturado
                        </label>
                        <label class="option">
                            <input type="radio" name="q31" value="2"> Plano básico
                        </label>
                        <label class="option">
                            <input type="radio" name="q31" value="1"> Procedimentos informais
                        </label>
                        <label class="option">
                            <input type="radio" name="q31" value="0"> Não possui plano
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>32. Há processo para notificação de incidentes à ANPD?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q32" value="4"> Processo automatizado e ágil
                        </label>
                        <label class="option">
                            <input type="radio" name="q32" value="3"> Processo estruturado
                        </label>
                        <label class="option">
                            <input type="radio" name="q32" value="2"> Processo básico
                        </label>
                        <label class="option">
                            <input type="radio" name="q32" value="1"> Processo informal
                        </label>
                        <label class="option">
                            <input type="radio" name="q32" value="0"> Não há processo
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>33. A empresa comunica incidentes aos titulares quando necessário?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q33" value="4"> Comunicação proativa e transparente
                        </label>
                        <label class="option">
                            <input type="radio" name="q33" value="3"> Comunicação adequada
                        </label>
                        <label class="option">
                            <input type="radio" name="q33" value="2"> Comunicação básica
                        </label>
                        <label class="option">
                            <input type="radio" name="q33" value="1"> Comunicação limitada
                        </label>
                        <label class="option">
                            <input type="radio" name="q33" value="0"> Não comunica
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>34. Há registro e análise de incidentes de segurança?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q34" value="4"> Registro completo e análise detalhada
                        </label>
                        <label class="option">
                            <input type="radio" name="q34" value="3"> Registro estruturado
                        </label>
                        <label class="option">
                            <input type="radio" name="q34" value="2"> Registro básico
                        </label>
                        <label class="option">
                            <input type="radio" name="q34" value="1"> Registro informal
                        </label>
                        <label class="option">
                            <input type="radio" name="q34" value="0"> Não registra
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>35. A empresa realiza testes de resposta a incidentes?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q35" value="4"> Testes regulares e simulações
                        </label>
                        <label class="option">
                            <input type="radio" name="q35" value="3"> Testes periódicos
                        </label>
                        <label class="option">
                            <input type="radio" name="q35" value="2"> Testes básicos
                        </label>
                        <label class="option">
                            <input type="radio" name="q35" value="1"> Testes esporádicos
                        </label>
                        <label class="option">
                            <input type="radio" name="q35" value="0"> Não realiza testes
                        </label>
                    </div>
                </div>

                <div class="navigation">
                    <button class="btn btn-secondary" onclick="previousStep()"> Anterior</button>
                    <button class="btn btn-primary" onclick="nextStep()">Próximo </button>
                </div>
            </div>
        </div>

        <!-- Etapa 9: Monitoramento e Auditoria -->
        <div class="step" id="step9">
            <div class="card">
                <h2>Monitoramento e Auditoria</h2>
                <p>Avaliação do monitoramento contínuo conforme Art. 50 da LGPD.</p>
                
                <div class="question">
                    <h3>36. A empresa possui indicadores de conformidade LGPD?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q36" value="4"> KPIs estruturados e monitorados
                        </label>
                        <label class="option">
                            <input type="radio" name="q36" value="3"> Indicadores adequados
                        </label>
                        <label class="option">
                            <input type="radio" name="q36" value="2"> Indicadores básicos
                        </label>
                        <label class="option">
                            <input type="radio" name="q36" value="1"> Métricas informais
                        </label>
                        <label class="option">
                            <input type="radio" name="q36" value="0"> Não possui indicadores
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>37. Há relatórios regulares sobre conformidade?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q37" value="4"> Relatórios automatizados e detalhados
                        </label>
                        <label class="option">
                            <input type="radio" name="q37" value="3"> Relatórios estruturados
                        </label>
                        <label class="option">
                            <input type="radio" name="q37" value="2"> Relatórios básicos
                        </label>
                        <label class="option">
                            <input type="radio" name="q37" value="1"> Relatórios esporádicos
                        </label>
                        <label class="option">
                            <input type="radio" name="q37" value="0"> Não há relatórios
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>38. A empresa realiza avaliações de impacto (DPIA)?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q38" value="4"> DPIA estruturada e regular
                        </label>
                        <label class="option">
                            <input type="radio" name="q38" value="3"> DPIA quando necessária
                        </label>
                        <label class="option">
                            <input type="radio" name="q38" value="2"> Avaliação básica de riscos
                        </label>
                        <label class="option">
                            <input type="radio" name="q38" value="1"> Avaliação informal
                        </label>
                        <label class="option">
                            <input type="radio" name="q38" value="0"> Não realiza DPIA
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>39. Há processo de melhoria contínua em privacidade?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q39" value="4"> Processo estruturado e ativo
                        </label>
                        <label class="option">
                            <input type="radio" name="q39" value="3"> Melhorias periódicas
                        </label>
                        <label class="option">
                            <input type="radio" name="q39" value="2"> Melhorias pontuais
                        </label>
                        <label class="option">
                            <input type="radio" name="q39" value="1"> Melhorias esporádicas
                        </label>
                        <label class="option">
                            <input type="radio" name="q39" value="0"> Não há processo
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>40. A empresa monitora mudanças regulatórias?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q40" value="4"> Monitoramento ativo e estruturado
                        </label>
                        <label class="option">
                            <input type="radio" name="q40" value="3"> Acompanhamento regular
                        </label>
                        <label class="option">
                            <input type="radio" name="q40" value="2"> Acompanhamento básico
                        </label>
                        <label class="option">
                            <input type="radio" name="q40" value="1"> Acompanhamento esporádico
                        </label>
                        <label class="option">
                            <input type="radio" name="q40" value="0"> Não monitora
                        </label>
                    </div>
                </div>

                <div class="navigation">
                    <button class="btn btn-secondary" onclick="previousStep()"> Anterior</button>
                    <button class="btn btn-primary" onclick="nextStep()">Próximo </button>
                </div>
            </div>
        </div>

        <!-- Etapa 10: Transparência e Comunicação -->
        <div class="step" id="step10">
            <div class="card">
                <h2>Transparência e Comunicação</h2>
                <p>Avaliação da transparência e comunicação conforme Art. 8º e 9º da LGPD.</p>
                
                <div class="question">
                    <h3>41. A política de privacidade é clara e acessível?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q41" value="4"> Política completa, clara e facilmente acessível
                        </label>
                        <label class="option">
                            <input type="radio" name="q41" value="3"> Política adequada e acessível
                        </label>
                        <label class="option">
                            <input type="radio" name="q41" value="2"> Política básica
                        </label>
                        <label class="option">
                            <input type="radio" name="q41" value="1"> Política genérica
                        </label>
                        <label class="option">
                            <input type="radio" name="q41" value="0"> Não possui política
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>42. Os titulares são informados sobre o tratamento de seus dados?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q42" value="4"> Informação completa e proativa
                        </label>
                        <label class="option">
                            <input type="radio" name="q42" value="3"> Informação adequada
                        </label>
                        <label class="option">
                            <input type="radio" name="q42" value="2"> Informação básica
                        </label>
                        <label class="option">
                            <input type="radio" name="q42" value="1"> Informação limitada
                        </label>
                        <label class="option">
                            <input type="radio" name="q42" value="0"> Não há informação
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>43. Há comunicação sobre mudanças nas práticas de privacidade?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q43" value="4"> Comunicação proativa e detalhada
                        </label>
                        <label class="option">
                            <input type="radio" name="q43" value="3"> Comunicação adequada
                        </label>
                        <label class="option">
                            <input type="radio" name="q43" value="2"> Comunicação básica
                        </label>
                        <label class="option">
                            <input type="radio" name="q43" value="1"> Comunicação limitada
                        </label>
                        <label class="option">
                            <input type="radio" name="q43" value="0"> Não há comunicação
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>44. A empresa mantém canal de comunicação com os titulares?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q44" value="4"> Canal dedicado e eficiente
                        </label>
                        <label class="option">
                            <input type="radio" name="q44" value="3"> Canal estruturado
                        </label>
                        <label class="option">
                            <input type="radio" name="q44" value="2"> Canal básico
                        </label>
                        <label class="option">
                            <input type="radio" name="q44" value="1"> Canal informal
                        </label>
                        <label class="option">
                            <input type="radio" name="q44" value="0"> Não possui canal
                        </label>
                    </div>
                </div>

                <div class="question">
                    <h3>45. Há processo para atualização das informações de privacidade?</h3>
                    <div class="options">
                        <label class="option">
                            <input type="radio" name="q45" value="4"> Processo estruturado e regular
                        </label>
                        <label class="option">
                            <input type="radio" name="q45" value="3"> Processo periódico
                        </label>
                        <label class="option">
                            <input type="radio" name="q45" value="2"> Atualizações pontuais
                        </label>
                        <label class="option">
                            <input type="radio" name="q45" value="1"> Atualizações esporádicas
                        </label>
                        <label class="option">
                            <input type="radio" name="q45" value="0"> Não há processo
                        </label>
                    </div>
                </div>

                <div class="navigation">
                    <button class="btn btn-secondary" onclick="previousStep()"> Anterior</button>
                    <button class="btn btn-primary" onclick="finishAssessment()">Finalizar Avaliação </button>
                </div>
            </div>
        </div>

        <!-- Etapa 11: Resultados -->
        <div class="step" id="step11">
            <div class="card">
                <div class="loading" id="loadingResults">
                    <div class="spinner"></div>
                    <p>Processando sua avaliação...</p>
                </div>
                
                <div class="results" id="resultsContent" style="display: none;">
                    <h2>Diagnóstico de Conformidade LGPD</h2>
                    <div class="score" id="scoreDisplay">0%</div>
                    <div class="classification" id="classificationDisplay">Processando...</div>
                    
                    <div class="recommendations" id="recommendationsDisplay">
                        <!-- Recomendações serão inseridas aqui -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 0;
        const totalSteps = 11;
        let responses = {};
        let companyData = {};

        const stepTitles = [
            'Introdução',
            'Informações da Empresa',
            'Governança e Estrutura',
            'Mapeamento e Inventário',
            'Bases Legais e Finalidades',
            'Direitos dos Titulares',
            'Segurança da Informação',
            'Gestão de Terceiros',
            'Gestão de Incidentes',
            'Monitoramento e Auditoria',
            'Transparência e Comunicação'
        ];

        function updateProgress() {
            const progress = (currentStep / totalSteps) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('stepIndicator').textContent = stepTitles[currentStep];
        }

        function showStep(step) {
            const steps = document.querySelectorAll('.step');
            steps.forEach(s => s.classList.remove('active'));
            
            const currentStepElement = document.getElementById('step' + step);
            if (currentStepElement) {
                currentStepElement.classList.add('active');
            }
            
            updateProgress();
        }

        function validateStep() {
            if (currentStep === 1) {
                const companyName = document.getElementById('companyName').value.trim();
                const sector = document.getElementById('sector').value;
                const employees = document.getElementById('employees').value;
                const email = document.getElementById('email').value.trim();

                let isValid = true;

                if (!companyName) {
                    document.getElementById('companyNameError').textContent = 'Nome da empresa é obrigatório';
                    isValid = false;
                } else {
                    document.getElementById('companyNameError').textContent = '';
                }

                if (!sector) {
                    document.getElementById('sectorError').textContent = 'Setor de atuação é obrigatório';
                    isValid = false;
                } else {
                    document.getElementById('sectorError').textContent = '';
                }

                if (!employees) {
                    document.getElementById('employeesError').textContent = 'Número de funcionários é obrigatório';
                    isValid = false;
                } else {
                    document.getElementById('employeesError').textContent = '';
                }

                if (!email || !email.includes('@')) {
                    document.getElementById('emailError').textContent = 'E-mail válido é obrigatório';
                    isValid = false;
                } else {
                    document.getElementById('emailError').textContent = '';
                }

                if (isValid) {
                    companyData = {
                        name: companyName,
                        sector: sector,
                        employees: employees,
                        email: email
                    };
                }

                return isValid;
            } else if (currentStep >= 2 && currentStep <= 10) {
                const questions = document.querySelectorAll(`#step${currentStep} input[type="radio"]`);
                const questionNames = new Set();
                questions.forEach(q => questionNames.add(q.name));
                
                for (let questionName of questionNames) {
                    const selected = document.querySelector(`input[name="${questionName}"]:checked`);
                    if (!selected) {
                        alert('Por favor, responda todas as perguntas antes de continuar.');
                        return false;
                    }
                    responses[questionName] = parseInt(selected.value);
                }
                return true;
            }
            return true;
        }

        function nextStep() {
            if (validateStep()) {
                if (currentStep < totalSteps - 1) {
                    currentStep++;
                    showStep(currentStep);
                }
            }
        }

        function previousStep() {
            if (currentStep > 0) {
                currentStep--;
                showStep(currentStep);
            }
        }

        function finishAssessment() {
            if (validateStep()) {
                currentStep = 11;
                showStep(currentStep);
                
                document.getElementById('loadingResults').style.display = 'block';
                document.getElementById('resultsContent').style.display = 'none';
                
                setTimeout(() => {
                    calculateResults();
                    
                    setTimeout(() => {
                        sendToGoogleSheets();
                    }, 50000); // 50 segundos de delay
                    
                }, 2000);
            }
        }

        function calculateResults() {
            const totalQuestions = 45;
            const maxScore = totalQuestions * 4;
            let totalScore = 0;

            for (let i = 1; i <= totalQuestions; i++) {
                const questionKey = 'q' + i;
                if (responses[questionKey] !== undefined) {
                    totalScore += responses[questionKey];
                }
            }

            const percentage = Math.round((totalScore / maxScore) * 100);
            
            let classification, classificationClass, recommendations;
            
            if (percentage >= 85) {
                classification = 'Conformidade Excelente';
                classificationClass = 'excellent';
                recommendations = getExcellentRecommendations();
            } else if (percentage >= 70) {
                classification = 'Conformidade Adequada';
                classificationClass = 'good';
                recommendations = getGoodRecommendations();
            } else if (percentage >= 40) {
                classification = 'Conformidade Parcial';
                classificationClass = 'partial';
                recommendations = getPartialRecommendations();
            } else {
                classification = 'Situação Crítica';
                classificationClass = 'critical';
                recommendations = getCriticalRecommendations();
            }

            document.getElementById('scoreDisplay').textContent = percentage + '%';
            document.getElementById('classificationDisplay').textContent = classification;
            document.getElementById('classificationDisplay').className = 'classification ' + classificationClass;
            document.getElementById('recommendationsDisplay').innerHTML = recommendations;
            
            document.getElementById('loadingResults').style.display = 'none';
            document.getElementById('resultsContent').style.display = 'block';
        }

        function sendToGoogleSheets() {
            const assessmentData = {
                timestamp: new Date().toISOString(),
                companyName: companyData.name,
                sector: companyData.sector,
                employees: companyData.employees,
                email: companyData.email,
                score: Math.round((Object.values(responses).reduce((a, b) => a + b, 0) / (45 * 4)) * 100),
                responses: JSON.stringify(responses)
            };

            fetch('https://script.google.com/macros/s/AKfycbxctXNZllFMRKtZ_No0S6HDl81EyM6dmd1ZHdPbHwcoCewq5R-xLDSKGIlO7Y3ah4Ibag/exec', {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: new URLSearchParams(assessmentData).toString()
            })
            .then(() => {
                showSuccessNotification();
                console.log('Dados enviados com sucesso!');
            })
            .catch(error => {
                console.error('Erro ao enviar dados:', error);
                showSuccessNotification();
            });
        }

        function showSuccessNotification() {
            const notification = document.createElement('div');
            notification.innerHTML = '✅ Dados salvos com sucesso!';
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #28a745;
                color: white;
                padding: 15px 25px;
                border-radius: 8px;
                z-index: 9999;
                font-size: 16px;
                font-weight: bold;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                animation: slideIn 0.3s ease-out;
            `;
            
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideIn 0.3s ease-out reverse';
                setTimeout(() => {
                    notification.remove();
                }, 300);
            }, 4000);
        }

        function getExcellentRecommendations() {
            return `
                <div class="recommendation">
                    <div class="priority low">Prioridade Baixa</div>
                    <h4>Programa de Melhoria Contínua</h4>
                    <p>Implementar metodologia PDCA (Plan-Do-Check-Act) para manutenção da excelência em conformidade LGPD. Estabelecer KPIs específicos para monitoramento proativo de mudanças regulatórias e evolução das melhores práticas internacionais.</p>
                    <p><strong>Referência Legal:</strong> Art. 50 da LGPD - Programa de Governança em Privacidade</p>
                    <p><strong>Prazo:</strong> 90 dias para implementação completa</p>
                </div>
                
                <div class="recommendation">
                    <div class="priority low">Prioridade Baixa</div>
                    <h4>Monitoramento Proativo de Mudanças Regulatórias</h4>
                    <p>Estabelecer sistema de acompanhamento contínuo das diretrizes da ANPD e jurisprudência emergente. Implementar processo de avaliação trimestral de impacto de novas regulamentações nos procedimentos internos.</p>
                    <p><strong>Referência Legal:</strong> Regulamentações da ANPD e Lei 13.709/2018</p>
                    <p><strong>Prazo:</strong> 60 dias para estruturação</p>
                </div>
                
                <div class="recommendation">
                    <div class="priority low">Prioridade Baixa</div>
                    <h4>Capacitação Avançada por Função e Hierarquia</h4>
                    <p>Desenvolver programa de capacitação diferenciado por função organizacional, incluindo módulos específicos para liderança, operações e áreas técnicas. Implementar certificação interna em proteção de dados.</p>
                    <p><strong>Metodologia:</strong> Framework de competências baseado em Privacy by Design</p>
                    <p><strong>Prazo:</strong> 120 dias para implementação completa</p>
                </div>
            `;
        }

        function getGoodRecommendations() {
            return `
                <div class="recommendation">
                    <div class="priority medium">Prioridade Média</div>
                    <h4>Fortalecimento Sistemático Baseado em Análise de Risco</h4>
                    <p>Implementar metodologia PDCA para identificação e mitigação de gaps específicos. Realizar análise de risco detalhada das atividades de tratamento com foco nas áreas de menor pontuação na avaliação.</p>
                    <p><strong>Referência Legal:</strong> Art. 46 da LGPD - Medidas de Segurança Técnicas e Administrativas</p>
                    <p><strong>Prazo:</strong> 90 dias para análise e 120 dias para implementação</p>
                </div>
                
                <div class="recommendation">
                    <div class="priority medium">Prioridade Média</div>
                    <h4>Documentação Completa de Atividades de Tratamento</h4>
                    <p>Estruturar registro detalhado conforme Art. 37 da LGPD, incluindo finalidades específicas, bases legais, categorias de dados, compartilhamentos e prazos de retenção. Implementar processo de revisão semestral da documentação.</p>
                    <p><strong>Referência Legal:</strong> Art. 37 da LGPD - Registro das Atividades de Tratamento</p>
                    <p><strong>Prazo:</strong> 60 dias para documentação inicial</p>
                </div>
                
                <div class="recommendation">
                    <div class="priority medium">Prioridade Média</div>
                    <h4>Capacitação Específica por Área de Deficiência</h4>
                    <p>Desenvolver programa de treinamento direcionado às áreas identificadas com menor conformidade. Implementar avaliação de eficácia dos treinamentos e programa de reciclagem trimestral.</p>
                    <p><strong>Metodologia:</strong> Abordagem setorial baseada em contexto de negócio</p>
                    <p><strong>Prazo:</strong> 45 dias para início do programa</p>
                </div>
            `;
        }

        function getPartialRecommendations() {
            return `
                <div class="recommendation">
                    <div class="priority high">Prioridade Alta</div>
                    <h4>Programa Estruturado de Adequação LGPD</h4>
                    <p>Implementar metodologia PDCA estruturada em 4 fases: (1) Diagnóstico detalhado, (2) Desenvolvimento de políticas fundamentais, (3) Implementação de controles técnicos e organizacionais, (4) Monitoramento e melhoria contínua.</p>
                    <p><strong>Referência Legal:</strong> Art. 50 da LGPD - Programa de Governança em Privacidade</p>
                    <p><strong>Prazo:</strong> 120 dias para implementação das fases 1 e 2</p>
                </div>
                
                <div class="recommendation">
                    <div class="priority high">Prioridade Alta</div>
                    <h4>Desenvolvimento de Políticas Fundamentais Adaptadas ao Setor</h4>
                    <p>Criar política de privacidade, procedimentos de resposta a direitos dos titulares, política de segurança da informação e procedimentos de gestão de incidentes. Adaptar às especificidades do setor ${companyData.sector}.</p>
                    <p><strong>Referência Legal:</strong> Art. 37, 46 e 48 da LGPD</p>
                    <p><strong>Prazo:</strong> 90 dias para desenvolvimento completo</p>
                </div>
                
                <div class="recommendation">
                    <div class="priority high">Prioridade Alta</div>
                    <h4>Análise de Obrigatoriedade de Designação de DPO</h4>
                    <p>Avaliar critérios do Art. 41 da LGPD considerando: (1) volume de dados tratados, (2) sensibilidade dos dados, (3) atividade principal da empresa. Para empresas com ${companyData.employees} funcionários no setor ${companyData.sector}, recomenda-se designação de responsável interno qualificado.</p>
                    <p><strong>Referência Legal:</strong> Art. 41 da LGPD - Encarregado pelo Tratamento de Dados Pessoais</p>
                    <p><strong>Prazo:</strong> 30 dias para análise e 60 dias para designação</p>
                </div>
            `;
        }

        function getCriticalRecommendations() {
            return `
                <div class="recommendation">
                    <div class="priority high">Prioridade Crítica</div>
                    <h4>Ação Imediata de Adequação LGPD</h4>
                    <p>Situação crítica requer intervenção imediata. Implementar em 24-48h: (1) Suspensão de atividades de tratamento não essenciais, (2) Inventário emergencial de dados pessoais, (3) Implementação de medidas básicas de segurança, (4) Designação de responsável interno.</p>
                    <p><strong>Referência Legal:</strong> Art. 52 da LGPD - Sanções Administrativas</p>
                    <p><strong>Prazo:</strong> 24-48 horas para medidas emergenciais</p>
                </div>
                
                <div class="recommendation">
                    <div class="priority high">Prioridade Crítica</div>
                    <h4>Consultoria Especializada Urgente</h4>
                    <p>Recomenda-se contratação imediata de consultoria jurídica especializada em LGPD para: (1) Avaliação de riscos de sanções, (2) Desenvolvimento de plano de adequação emergencial, (3) Implementação de controles mínimos de conformidade.</p>
                    <p><strong>Justificativa:</strong> Risco elevado de sanções da ANPD (até 2% do faturamento)</p>
                    <p><strong>Prazo:</strong> Contratação em 7 dias</p>
                </div>
                
                <div class="recommendation">
                    <div class="priority high">Prioridade Crítica</div>
                    <h4>Investimento Prioritário em Adequação</h4>
                    <p>Alocar recursos financeiros e humanos prioritários para adequação LGPD. Cronograma sugerido: (1) Semana 1-2: Medidas emergenciais, (2) Mês 1-3: Políticas básicas, (3) Mês 4-6: Implementação de controles, (4) Mês 7-12: Monitoramento e ajustes.</p>
                    <p><strong>Metodologia:</strong> Abordagem de gestão de crise em conformidade</p>
                    <p><strong>Prazo:</strong> Início imediato - cronograma de 12 meses</p>
                </div>
            `;
        }

        document.addEventListener('change', function(e) {
            if (e.target.type === 'radio') {
                const options = document.querySelectorAll(`input[name="${e.target.name}"]`);
                options.forEach(option => {
                    option.closest('.option').classList.remove('selected');
                });
                
                e.target.closest('.option').classList.add('selected');
            }
        });

        showStep(0);
    </script>
</body>
</html>
                
